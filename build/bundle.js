module.exports=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var r=n(2),o=n(34),i=n(5);e.exports=r.createServer(function(e,t){return i.info("Starting Logging extension - Version:","1.4.1"),o(e,t)})},function(e,t){e.exports=require("auth0-extension-tools@1.2.1")},function(e,t,n){const r=n(27),o=n(6),i=n(20),s=n(26);e.exports.createServer=r.createServer,e.exports.urlHelpers=o,e.exports.middlewares=i,e.exports.routes=s},function(e,t,n){"use strict";e.exports=n(1).config()},function(e,t){e.exports=require("express")},function(e,t,n){"use strict";var r=n(61);r.emitErrs=!0;var o=new r.Logger({transports:[new r.transports.Console({timestamp:!0,level:"debug",handleExceptions:!0,json:!1,colorize:!0})],exitOnError:!1});e.exports=o,e.exports.stream={write:function(e){o.info(e.replace(/\n$/,""))}}},function(e,t,n){function r(e){if(!e.container)return null;const t=e.container.replace(c,"\\$&"),n=e.jtn?e.jtn.replace(c,"\\$&"):"";if(e.url_format===a)return new RegExp("^/api/run/"+t+"/(?:"+n+"/?)?");if(e.url_format===s)return new RegExp("^/"+t+"/(?:"+n+"/?)?");if(e.url_format===i)return new RegExp("^/(?:"+n+"/?)?");throw new Error("Unsupported webtask URL format.")}const o=n(15),i=3,s=2,a=1,c=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,u=function(e,t){var n=o.parse(e).pathname||"";return n=n.replace(t,"").replace(/^\/|\/$/g,""),n.startsWith("/")||(n="/"+n),n.endsWith("/")||(n+="/"),n};e.exports.getBasePath=function(e){return u(e.originalUrl||"",e.path)},e.exports.getBaseUrl=function(e,t){var n=t;const r=o.parse(e.originalUrl||"").pathname||"";return o.format({protocol:n||"https",host:e.headers.host,pathname:r.replace(e.path,"").replace(/\/$/g,"")})},e.exports.getWebtaskUrl=function(e){const t=r(e.x_wt),n=e.url,i=e.url.replace(t,"/"),s=o.parse(i||"").pathname,a=o.parse(n||"").pathname||"";var c=o.format({protocol:"https",host:e.headers.host,pathname:a.replace(s,"").replace(/\/$/g,"")});return e.x_wt&&(0===c.indexOf("https://sandbox.it.auth0.com")?c=c.replace("https://sandbox.it.auth0.com/api/run/"+e.x_wt.container+"/","https://"+e.x_wt.container+".us.webtask.io/"):0===c.indexOf("https://sandbox-eu.it.auth0.com")?c=c.replace("https://sandbox-eu.it.auth0.com/api/run/"+e.x_wt.container+"/","https://"+e.x_wt.container+".eu.webtask.io/"):0===c.indexOf("https://sandbox-au.it.auth0.com")&&(c=c.replace("https://sandbox-au.it.auth0.com/api/run/"+e.x_wt.container+"/","https://"+e.x_wt.container+".au.webtask.io/"))),c}},function(e,t){const n={s:{event:"Success Login",level:1},seacft:{event:"Success Exchange",level:1},seccft:{event:"Success Exchange (Client Credentials)",level:1},feacft:{event:"Failed Exchange",level:3},feccft:{event:"Failed Exchange (Client Credentials)",level:3},f:{event:"Failed Login",level:3},w:{event:"Warnings During Login",level:2},du:{event:"Deleted User",level:1},fu:{event:"Failed Login (invalid email/username)",level:3},fp:{event:"Failed Login (wrong password)",level:3},fc:{event:"Failed by Connector",level:3},fco:{event:"Failed by CORS",level:3},con:{event:"Connector Online",level:1},coff:{event:"Connector Offline",level:3},fcpro:{event:"Failed Connector Provisioning",level:4},ss:{event:"Success Signup",level:1},fs:{event:"Failed Signup",level:3},cs:{event:"Code Sent",level:0},cls:{event:"Code/Link Sent",level:0},sv:{event:"Success Verification Email",level:0},fv:{event:"Failed Verification Email",level:0},scp:{event:"Success Change Password",level:1},fcp:{event:"Failed Change Password",level:3},sce:{event:"Success Change Email",level:1},fce:{event:"Failed Change Email",level:3},scu:{event:"Success Change Username",level:1},fcu:{event:"Failed Change Username",level:3},scpn:{event:"Success Change Phone Number",level:1},fcpn:{event:"Failed Change Phone Number",level:3},svr:{event:"Success Verification Email Request",level:0},fvr:{event:"Failed Verification Email Request",level:3},scpr:{event:"Success Change Password Request",level:0},fcpr:{event:"Failed Change Password Request",level:3},fn:{event:"Failed Sending Notification",level:3},sapi:{event:"API Operation"},fapi:{event:"Failed API Operation"},limit_wc:{event:"Blocked Account",level:4},limit_ui:{event:"Too Many Calls to /userinfo",level:4},api_limit:{event:"Rate Limit On API",level:4},sdu:{event:"Successful User Deletion",level:1},fdu:{event:"Failed User Deletion",level:3},fapi:{event:"Failed API Operation",level:3},limit_wc:{event:"Blocked Account",level:3},limit_mu:{event:"Blocked IP Address",level:3},slo:{event:"Success Logout",level:1},flo:{event:" Failed Logout",level:3},sd:{event:"Success Delegation",level:1},fd:{event:"Failed Delegation",level:3}};e.exports=function(e){return n[e]&&n[e].event||"Unknown Log Type: "+e}},function(e,t,n){"use strict";var r=n(46);e.exports=function(e,t,n){return function(o,i,s){var a=r(s);return e===!0||"function"==typeof e&&e(o,i,a)?t(o,i,a):n?n(o,i,a):a()}}},function(e,t,n){"use strict";var r=n(44);e.exports=function(e,t){if("string"!=typeof e)throw new Error("Invalid token specified");t=t||{};var n=t.header===!0?0:1;return JSON.parse(r(e.split(".")[n]))}},function(e,t){e.exports=require("bluebird")},function(e,t){e.exports=require("express-jwt")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("querystring")},function(e,t){e.exports=require("superagent")},function(e,t){e.exports=require("url")},function(e,t){e.exports=require("util")},function(e,t,n){const r=n(9),o=n(11),i=n(1),s=n(8);e.exports=function(e){if(!e||"object"!=typeof e)throw new i.ArgumentError("Must provide the options");if(null===e.secret||void 0===e.secret)throw new i.ArgumentError("Must provide a valid secret");if("string"!=typeof e.secret||0===e.secret.length)throw new i.ArgumentError("The provided secret is invalid: "+e.secret);if(null===e.audience||void 0===e.audience)throw new i.ArgumentError("Must provide a valid secret");if("string"!=typeof e.audience||0===e.audience.length)throw new i.ArgumentError("The provided audience is invalid: "+e.audience);if(null===e.baseUrl||void 0===e.baseUrl)throw new i.ArgumentError("Must provide a valid base URL");if("string"!=typeof e.baseUrl||0===e.baseUrl.length)throw new i.ArgumentError("The provided base URL is invalid: "+e.baseUrl);const t=o({audience:e.audience,issuer:e.baseUrl,secret:e.secret,algorithms:["HS256"],credentialsRequired:e.credentialsRequired||!0});return function(n,r,o){t(n,r,function(t){return t?o(t):e.onLoginSuccess?e.onLoginSuccess(n,r,o):o()})}},e.exports.optional=function(t){const n=e.exports(t);return s(function(e){if(e&&e.headers&&e.headers.authorization&&0===e.headers.authorization.indexOf("Bearer "))try{const n=r(e.headers.authorization.split(" ")[1]);return n&&n.iss===t.baseUrl}catch(e){return!1}return!1},n)}},function(e,t,n){const r=n(9),o=n(11),i=n(55),s=n(1),a=n(8),c=n(1).UnauthorizedError;e.exports=function(e){if(!e||"object"!=typeof e)throw new s.ArgumentError("Must provide the options");if(null===e.domain||void 0===e.domain)throw new s.ArgumentError("Must provide a valid domain");if("string"!=typeof e.domain||0===e.domain.length)throw new s.ArgumentError("The provided domain is invalid: "+e.domain);if(null===e.audience||void 0===e.audience)throw new s.ArgumentError("Must provide a valid audience");if("string"!=typeof e.audience||0===e.audience.length)throw new s.ArgumentError("The provided audience is invalid: "+e.audience);const t=o({secret:i.expressJwtSecret({cache:!0,rateLimit:!0,jwksRequestsPerMinute:5,jwksUri:"https://"+e.domain+"/.well-known/jwks.json",handleSigningKeyError:function(e,t){return t(e instanceof i.SigningKeyNotFoundError?new c("A token was provided with an invalid kid"):e)}}),audience:e.audience,issuer:"https://"+e.domain+"/",algorithms:["RS256"],credentialsRequired:e&&e.credentialsRequired||!0});return function(n,r,o){t(n,r,function(t){return t?o(t):e.onLoginSuccess?e.onLoginSuccess(n,r,o):o()})}},e.exports.optional=function(t){const n=e.exports(t);return a(function(e){if(e&&e.headers&&e.headers.authorization&&0===e.headers.authorization.indexOf("Bearer "))try{const n=r(e.headers.authorization.split(" ")[1]);return n&&n.iss==="https://"+t.domain+"/"}catch(e){return!1}return!1},n)}},function(e,t,n){e.exports=function(e){return function(t,n,r,o){return e&&e(t),t&&t.status?(r.status(t.status),r.json({error:t.code||t.name,message:t.message||t.name})):(r.status(t.status||500),r.json({error:"InternalServerError",message:t.message||t.name}))}}},function(e,t,n){e.exports.authenticateAdmins=n(17),e.exports.authenticateUsers=n(18),e.exports.requireAuthentication=n(22),e.exports.errorHandler=n(19),e.exports.managementApiClient=n(21),e.exports.validateHookToken=n(23),e.exports.webtaskConfig=n(24)},function(e,t,n){const r=n(1);e.exports=function(e){return function(t,n,o){const i=t,s=t.user&&t.user.access_token&&t.user.access_token.length,a=s?{domain:e.domain,accessToken:t.user.access_token}:e;r.managementApi.getClient(a).then(function(e){return i.auth0=e,o(),null}).catch(function(e){o(e)})}}},function(e,t,n){const r=n(1).UnauthorizedError;e.exports=function(e,t,n){return e.user?n():n(new r("Authentication required for this endpoint."))}},function(e,t,n){const r=n(1);e.exports=function(e,t,n){if(null===e||void 0===e)throw new r.ArgumentError("Must provide the domain");if("string"!=typeof e||0===e.length)throw new r.ArgumentError("The provided domain is invalid: "+e);if(null===t||void 0===t)throw new r.ArgumentError("Must provide the webtaskUrl");if("string"!=typeof t||0===t.length)throw new r.ArgumentError("The provided webtaskUrl is invalid: "+t);if(null===n||void 0===n)throw new r.ArgumentError("Must provide the extensionSecret");if("string"!=typeof n||0===n.length)throw new r.ArgumentError("The provided extensionSecret is invalid: "+n);return function(o){if(null===o||void 0===o)throw new r.ArgumentError("Must provide the hookPath");if("string"!=typeof o||0===o.length)throw new r.ArgumentError("The provided hookPath is invalid: "+o);return function(i,s,a){if(i.headers.authorization&&"Bearer"===i.headers.authorization.split(" ")[0]){const c=i.headers.authorization.split(" ")[1];try{if(r.validateHookToken(e,t,o,n,c))return a()}catch(e){return a(e)}}return a(new r.HookTokenError("Hook token missing for the call to: "+o))}}}},function(e,t,n){const r=n(1);e.exports=function(e){return function(t,n,o){return t.webtaskContext&&e.setProvider(r.configProvider.fromWebtaskContext(t.webtaskContext)),o()}}},function(e,t,n){const r=n(4),o=n(50),i=n(40),s=n(1),a=n(6);e.exports=function(e){if(!e||"object"!=typeof e)throw new s.ArgumentError("Must provide the options");if(null===e.secret||void 0===e.secret)throw new s.ArgumentError("Must provide a valid secret");if("string"!=typeof e.secret||0===e.secret.length)throw new s.ArgumentError("The provided secret is invalid: "+e.secret);if(null===e.audience||void 0===e.audience)throw new s.ArgumentError("Must provide a valid secret");if("string"!=typeof e.audience||0===e.audience.length)throw new s.ArgumentError("The provided audience is invalid: "+e.audience);if(null===e.rta||void 0===e.rta)throw new s.ArgumentError("Must provide a valid rta");if("string"!=typeof e.rta||0===e.rta.length)throw new s.ArgumentError("The provided rta is invalid: "+e.rta);if(null===e.domain||void 0===e.domain)throw new s.ArgumentError("Must provide a valid domain");if("string"!=typeof e.domain||0===e.domain.length)throw new s.ArgumentError("The provided domain is invalid: "+e.domain);if(null===e.baseUrl||void 0===e.baseUrl)throw new s.ArgumentError("Must provide a valid base URL");if("string"!=typeof e.baseUrl||0===e.baseUrl.length)throw new s.ArgumentError("The provided base URL is invalid: "+e.baseUrl);if(null===e.clientName||void 0===e.clientName)throw new s.ArgumentError("Must provide a valid client name");if("string"!=typeof e.clientName||0===e.clientName.length)throw new s.ArgumentError("The provided client name is invalid: "+e.clientName);const t=e.stateKey||"state",n=e.urlPrefix||"",c=e.sessionStorageKey||"apiToken",u=r.Router();return u.get(n+"/login",function(r,i){const c=o.randomBytes(16).toString("hex");i.cookie(t,c);const u=new s.SessionManager(e.rta,e.domain,e.baseUrl),l=u.createAuthorizeUrl({redirectUri:a.getBaseUrl(r)+n+"/login/callback",scopes:e.scopes,expiration:e.expiration});i.redirect(l+"&state="+c)}),u.post(n+"/login/callback",i(),function(n,r,o){if(!n.cookies||n.cookies[t]!==n.body.state)return o(new s.ValidationError("Login failed. State mismatch."));const i=new s.SessionManager(e.rta,e.domain,e.baseUrl),u=i.create(n.body.id_token,n.body.access_token,{secret:e.secret,issuer:e.baseUrl,audience:e.audience});return u.then(function(e){r.header("Content-Type","text/html"),r.status(200).send('<html><head><script type="text/javascript">sessionStorage.setItem("'+c+'", "'+e+'");window.location.href = "'+a.getBaseUrl(n)+'";</script></head></html>')}).catch(function(e){o(e)})}),u.get(n+"/logout",function(t,n){const r=encodeURIComponent(a.getBaseUrl(t));n.header("Content-Type","text/html"),n.status(200).send('<html><head><script type="text/javascript">sessionStorage.removeItem("'+c+'");window.location.href = "https://'+e.rta+"/v2/logout/?returnTo="+r+"&client_id="+r+'";</script></head></html>')}),u.get("/.well-known/oauth2-client-configuration",function(t,r){r.header("Content-Type","application/json"),r.status(200).send({redirect_uris:[a.getBaseUrl(t)+n+"/login/callback"],client_name:e.clientName,post_logout_redirect_uris:[a.getBaseUrl(t)]})}),u}},function(e,t,n){e.exports.dashboardAdmins=n(25)},function(e,t,n){const r=n(1),o=n(60);e.exports.createServer=function(e){const t=r.createServer(e);var n=null;return o.fromExpress(function(e,r){return n||(n=t(e.webtaskContext)),n(e,r)})}},function(e,t,n){function r(e,t){if(!(e&&e.domain&&e.clientId&&e.clientSecret))throw new Error("domain, clientId and clientSecret are required");this.options=e,this.storage=t}const o=n(54),i=n(10),s=n(14),a=(n(57),n(13)),c=function(e){return new i(function(t,n){s.post("https://"+e.domain+"/oauth/token").send({audience:"https://"+e.domain+"/api/v2/",client_id:e.clientId,client_secret:e.clientSecret,grant_type:"client_credentials"}).set("Accept","application/json").end(function(e,r){return e?n(e):r.ok&&r.body.access_token?t(r.body.access_token):n(new Error("Unknown error from Management Api or no access token was provided: "+(r.text||r.status)))})})},u=function(e,t){return t.getToken().then(function(n){if(n){const r=o.decode(n),i=new Date(0);console.log(n),console.log(r),i.setUTCSeconds(r&&r.exp||0);const s=(new Date).valueOf();if(i.valueOf()-s>1e4)return n}return c(e).then(function(e){return t.setToken(e),e})})};r.prototype.getLogs=function(e){const t=this;return new i(function(n,r){u(t.options,t.storage).then(function(o){const i=a.stringify(e);s.get("https://"+t.options.domain+"/api/v2/logs?"+i).set("Authorization","Bearer "+o).set("Content-Type","application/json").end(function(e,t){if(e)return r(e);const o={limit:t.headers["x-ratelimit-limit"],remaining:t.headers["x-ratelimit-remaining"],reset:t.headers["x-ratelimit-reset"]};return n({logs:t.body,limits:o})})})})},e.exports=r},function(e,t,n){function r(e,t,n){if(!e)throw new Error("auth0Options is required");const r=new a(e,n),s=this;var c=50;t=t||{},i.call(this,{objectMode:!0}),this.previousCheckpoint=t.checkpointId||null,this.lastCheckpoint=t.checkpointId||null,this.lastBatch=0,this.status={start:new Date,end:null,logsProcessed:0},this.done=function(){s.status.end=new Date,s.push(null)},this.next=function(e){if(c<1)return s.status.warning="Auth0 Management API rate limit reached.",s.done();const n=s.lastCheckpoint?{take:e||100,from:s.lastCheckpoint}:{per_page:e||100,page:0};n.q=o(t.types),n.sort="date:1",r.getLogs(n).then(function(e){const t=e.logs;c=e.limits.remaining,t&&t.length?(s.lastCheckpoint=t[t.length-1]._id,s.lastBatch+=t.length,s.push(t)):(s.status.end=new Date,s.push(null))}).catch(function(e){s.emit("error",e)})},this.batchSaved=function(){s.previousCheckpoint=s.lastCheckpoint,s.status.logsProcessed+=s.lastBatch,s.lastBatch=0}}function o(e){return e&&e.length?"type:"+e.join(" OR type:"):""}const i=n(59).Readable,s=n(16),a=n(28);s.inherits(r,i),r.prototype._read=function(){},e.exports=r},function(e,t,n){function r(e){if(!e||"object"!=typeof e)throw new Error("options is required");if(!e.onLogsReceived||"function"!=typeof e.onLogsReceived)throw new Error("onLogsReceived function is required");if(!e.domain||!e.clientId||!e.clientSecret)throw new Error("domain, clientId and clientSecret are required")}function o(e,t){const n=(new Date).getTime();return e+1e3*t>=n}function i(e,t){return r(t),function(n,r,i){const l=new c(e),p=(new Date).getTime(),d=t.batchSize||100,f=t.maxRetries||5;l.getCheckpoint(t.startFrom).then(function(e){function n(e,n,o){n.error=e,t.onError&&t.onError(n,o),l.done(n,o).then(function(){return r.json({status:n,checkpoint:o})}).catch(i)}function c(e,n){if(t.onSuccess&&t.onSuccess(e,n),e.logsProcessed>0){const o=(new Date).getTime(),s=o-y,a=6048e5;return s>=a&&(e.warning="Logs are outdated more than for week. Last processed log has date is "+new Date(y)),l.done(e,n).then(function(){r.json({status:e,checkpoint:n})}).catch(i)}return r.json({status:e,checkpoint:n})}function h(){var e=t.logTypes||[];return t.logLevel&&(e=e.concat(Object.keys(s.filter(u,function(e){return e.level>=t.logLevel})))),s.uniq(e)}function g(){var e=d;return e-=w.length,e>100&&(e=100),e}const v={checkpointId:e,types:h()},m={domain:t.domain,clientId:t.clientId,clientSecret:t.clientSecret},x=new a(m,v,l);var w=[],y=0,b=0;x.next(g()),x.on("data",function(e){if(w=w.concat(e),e&&e.length&&(y=new Date(e[e.length-1].date).getTime()),w.length<d)return x.next(g());const r=function(e){if(e){if(!o(p,t.timeLimit||20))return n(e,x.status,x.previousCheckpoint);if(b<f)return b++,t.onLogsReceived(w,r);const i=["Skipping logs from "+x.previousCheckpoint+" to "+x.lastCheckpoint+" after "+f+" retries.",e];return n(i,x.status,x.lastCheckpoint)}w=[],o(p,t.timeLimit||20)?(x.batchSaved(),x.next(g())):x.done()};t.onLogsReceived(w,r)}),x.on("end",function(){t.onLogsReceived(w,function(e){return e?n(e,x.status,x.previousCheckpoint):(x.batchSaved(),void c(x.status,x.lastCheckpoint))})}),x.on("error",function(e){n(e,x.status,x.previousCheckpoint)})}).catch(i)}}const s=n(56),a=n(29),c=n(31),u=n(7);e.exports=i},function(e,t){function n(e,t){if(!e)throw new Error("storage is required");this.limit="undefined"==typeof t?400:t,this.storage=e}n.prototype.getCheckpoint=function(e){const t=this;return t.storage.read().then(function(n){return n=n||{},e!==n.startFrom&&(n.startFrom=e,n.checkpointId=e),t.storage.write(n).then(function(){return n.checkpointId||e||null})})},n.prototype.getToken=function(){const e=this;return e.storage.read().then(function(e){return e=e||{},e.auth0Token||null})},n.prototype.setToken=function(e){const t=this;return t.storage.read().then(function(n){return n=n||{},n.auth0Token=e,t.storage.write(n)})},n.prototype.done=function(e,t){const n=this;return n.storage.read().then(function(r){const o=Buffer.byteLength(JSON.stringify(r),"utf8");return r.logs||(r.logs=[]),o>=1024*n.limit&&r.logs&&r.logs.length&&r.logs.splice(0,5),e.checkpoint=t,r.logs.push(e),r.checkpointId=t,n.storage.write(r)})},e.exports=n},function(e,t,n){function r(e){e=e||{},this.send=function(t,n){if(!t||"object"!=typeof t)throw new Error("object status is required");const r=s(e,t,n);return new o(function(t,n){return e.hook?void i.post(e.hook).send(r).set("Accept","application/json").end(function(e){return e?n(e):t()}):t()})},r.instance=this}const o=n(10),i=n(14),s=function(e,t,n){const r={username:e.username||"auth0-logger",icon_emoji:e.icon||":rocket:",attachments:[]},o=e.title||"Auth0 Logger",i=t.error?o+" Error":o+" Success",s=t.error?t.error.message||t.error[0]||"Error occurred":null,a={fallback:e.fallback||i,text:e.text||i,fields:[{title:"Start time",value:t.start,short:!0},{title:"End time",value:t.end,short:!0},{title:"Logs processed",value:t.logsProcessed,short:!0},{title:"Last checkpoint",value:n,short:!0}],error_field:{title:"Error",value:s,short:!1}},c=e.url?" (<"+e.url+"|Details>)":null,u=a.fields;return t.error&&u.push(a.error_field),r.attachments.push({color:"#7CD197",fallback:a.fallback,text:a.fallback+(c||""),fields:u}),r};e.exports=r},function(e,t,n){e.exports.Auth0Logger=n(30),e.exports.SlackReporter=n(32),e.exports.getLogType=n(7)},function(e,t,n){(function(t){"use strict";var r=(n(15),n(12)),o=n(58),i=n(4),s=n(47),a=n(1),c=n(2),u=(n(2).urlHelpers,n(38)),l=n(39),p=n(36),d=n(5),f=n(3);e.exports=function(e,n){f.setProvider(e);var h=n?new a.WebtaskStorageContext(n,{force:1}):new a.FileStorageContext(r.join(t,"./data.json"),{mergeWrites:!0}),g=new i;return g.use(o(":method :url :status :response-time ms - :res[content-length]",{stream:d.stream})),g.use(s.json()),g.use(s.urlencoded({extended:!1})),g.use(c.routes.dashboardAdmins({secret:f("EXTENSION_SECRET"),audience:"urn:logs-to-mixpanel",rta:f("AUTH0_RTA").replace("https://",""),domain:f("AUTH0_DOMAIN"),baseUrl:f("PUBLIC_WT_URL"),clientName:"Logs to Mixpanel",urlPrefix:"",sessionStorageKey:"logs-to-mixpanel:apiToken",scopes:"read:logs"})),g.use("/meta",l()),g.use("/.extensions",p()),g.use("/app",i.static(r.join(t,"../dist"))),g.use("/",u(h)),g.use(c.middlewares.errorHandler(d.error.bind(d))),g}}).call(t,"/")},function(e,t,n){"use strict";var r=n(45),o=n(33),i=n(3),s=n(5);e.exports=function(e){return function(t,n,a){if(!t.body||!t.body.schedule||"active"!==t.body.state)return a();var c=function(e){return e.map(function(e){return{name:e.name,message:e.message,stack:e.stack}})},u=r.init(i("MIXPANEL_TOKEN"),{key:i("MIXPANEL_KEY")}),l=function e(t,n){t&&t.length||n(),u.import_batch(t,function(r){if(r&&r.length>0){if(t.length>10){var o=t.splice(0,10);return u.import_batch(o,function(r){return r&&r.length>0?(s.error(r),n(c(r))):(s.info(o.length+" events successfully sent to mixpanel."),e(t,n))})}return s.error(r),n(c(r))}return s.info(t.length+" events successfully sent to mixpanel."),n()})},p=function(e,t){if(!e||!e.length)return t();var n=Date.now(),r=e.map(function(e){var t=o.getLogType(e.type);return e.time=n,e.distinct_id=e.user_id||e.user_name||e.client_id||e._id,{event:t,properties:e}});l(r,t)},d=new o.reporters.SlackReporter({hook:i("SLACK_INCOMING_WEBHOOK_URL"),username:"auth0-logs-to-mixpanel",title:"Logs To Mixpanel"}),f={domain:i("AUTH0_DOMAIN"),clientId:i("AUTH0_CLIENT_ID"),clientSecret:i("AUTH0_CLIENT_SECRET"),batchSize:i("BATCH_SIZE"),startFrom:i("START_FROM"),logTypes:i("LOG_TYPES"),logLevel:i("LOG_LEVEL")},h=new o.LogsProcessor(e,f);return h.run(p).then(function(e){d.send(e.status,e.checkpoint),n.json(e)}).catch(function(e){d.send({error:e,logsProcessed:0},null),a(e)})}}},function(e,t,n){"use strict";var r=n(4).Router,o=n(2).middlewares,i=n(3),s=n(5);e.exports=function(){var e=r(),t=o.validateHookToken(i("AUTH0_DOMAIN"),i("WT_URL"),i("EXTENSION_SECRET"));return e.use("/on-uninstall",t("/.extensions/on-uninstall")),e.use(o.managementApiClient({domain:i("AUTH0_DOMAIN"),clientId:i("AUTH0_CLIENT_ID"),clientSecret:i("AUTH0_CLIENT_SECRET")})),e.delete("/on-uninstall",function(e,t){var n=i("AUTH0_CLIENT_ID");e.auth0.clients.delete({client_id:n}).then(function(){s.debug("Deleted client "+n),t.sendStatus(204)}).catch(function(e){s.debug("Error deleting client: "+i("AUTH0_CLIENT_ID")),s.error(e),t.sendStatus(204)})}),e}},function(e,t,n){(function(t){"use strict";var r=n(52),o=n(51),i=n(12),s=n(2).urlHelpers,a=n(3);e.exports=function(){var e='\n  <!DOCTYPE html>\n  <html lang="en">\n  <head>\n    <title><%= config.TITLE %></title>\n    <meta charset="UTF-8" />\n    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <link rel="shortcut icon" href="https://cdn.auth0.com/styleguide/4.6.13/lib/logos/img/favicon.png">\n    <meta name="viewport" content="width=device-width, initial-scale=1">\n    <link rel="stylesheet" type="text/css" href="https://cdn.auth0.com/styles/zocial.min.css" />\n    <link rel="stylesheet" type="text/css" href="https://cdn.auth0.com/manage/v0.3.1672/css/index.min.css" />\n    <link rel="stylesheet" type="text/css" href="https://cdn.auth0.com/styleguide/4.6.13/index.min.css" />\n    <% if (assets.style) { %><link rel="stylesheet" type="text/css" href="/app/<%= assets.style %>" /><% } %>\n    <% if (assets.version) { %><link rel="stylesheet" type="text/css" href="//cdn.auth0.com/extensions/auth0-logs-to-mixpanel/assets/auth0-logs-to-mixpanel.ui.<%= assets.version %>.css" /><% } %>\n    <% if (assets.customCss) { %><link rel="stylesheet" type="text/css" href="<%= assets.customCss %>" /><% } %>\n  </head>\n  <body>\n    <div id="app"></div>\n    <script type="text/javascript" src="//cdn.auth0.com/w2/auth0-7.0.4.min.js"></script>\n    <script type="text/javascript" src="//cdn.auth0.com/manage/v0.3.1672/js/bundle.js"></script>\n    <script type="text/javascript">window.config = <%- JSON.stringify(config) %>;</script>\n    <% if (assets.vendors) { %><script type="text/javascript" src="<%= assets.vendors %>"></script><% } %>\n    <% if (assets.app) { %><script type="text/javascript" src="<%= assets.app %>"></script><% } %>\n    <% if (assets.version) { %>\n    <script type="text/javascript" src="//cdn.auth0.com/extensions/auth0-logs-to-mixpanel/assets/auth0-logs-to-mixpanel.ui.vendors.<%= assets.version %>.js"></script>\n    <script type="text/javascript" src="//cdn.auth0.com/extensions/auth0-logs-to-mixpanel/assets/auth0-logs-to-mixpanel.ui.<%= assets.version %>.js"></script>\n    <% } %>\n  </body>\n  </html>\n  ';return function(n,c,u){if(0===n.url.indexOf("/api"))return u();var l={AUTH0_DOMAIN:a("AUTH0_DOMAIN"),AUTH0_CLIENT_ID:a("EXTENSION_CLIENT_ID"),AUTH0_MANAGE_URL:a("AUTH0_MANAGE_URL")||"https://manage.auth0.com",BASE_URL:s.getBaseUrl(n),BASE_PATH:s.getBasePath(n),TITLE:a("TITLE")},p="1.4.1";return p?c.send(o.render(e,{config:l,assets:{customCss:a("CUSTOM_CSS"),version:p}})):r.readFile(i.join(t,"../../dist/manifest.json"),"utf8",function(t,n){var r={config:l,assets:{customCss:a("CUSTOM_CSS"),app:"http://localhost:3000/app/bundle.js"}};!t&&n&&(r.assets=JSON.parse(n),r.assets.customCss=a("CUSTOM_CSS")),c.send(o.render(e,r))})}}}).call(t,"/")},function(e,t,n){"use strict";var r=n(4).Router,o=n(2).middlewares,i=n(3),s=n(35),a=n(37);e.exports=function(e){var t=r(),n=o.authenticateAdmins({credentialsRequired:!0,secret:i("EXTENSION_SECRET"),audience:"urn:logs-to-mixpanel",baseUrl:i("PUBLIC_WT_URL"),onLoginSuccess:function(e,t,n){return n()}});return t.get("/",a()),t.post("/",s(e)),t.get("/api/report",n,function(t,n,r){return e.read().then(function(e){return n.json(e&&e.logs||[])}).catch(r)}),t}},function(e,t,n){"use strict";var r=n(4),o=n(42);e.exports=function(){var e=r.Router();return e.get("/",function(e,t){t.status(200).send(o)}),e}},function(e,t,n){"use strict";function r(e,t){return function(n,r,o){if(n.cookies)return o();var s=n.headers.cookie,u=!e||Array.isArray(e)?e||[]:[e];return n.secret=u[0],n.cookies=Object.create(null),n.signedCookies=Object.create(null),s?(n.cookies=c.parse(s,t),0!==u.length&&(n.signedCookies=a(n.cookies,u),n.signedCookies=i(n.signedCookies)),n.cookies=i(n.cookies),void o()):o()}}function o(e){if("string"==typeof e&&"j:"===e.substr(0,2))try{return JSON.parse(e.slice(2))}catch(e){return}}function i(e){for(var t,n,r=Object.keys(e),i=0;i<r.length;i++)t=r[i],n=o(e[t]),n&&(e[t]=n);return e}function s(e,t){if("string"==typeof e){if("s:"!==e.substr(0,2))return e;for(var n=!t||Array.isArray(t)?t||[]:[t],r=0;r<n.length;r++){var o=u.unsign(e.slice(2),n[r]);if(o!==!1)return o}return!1}}function a(e,t){for(var n,r,o,i=Object.keys(e),a=Object.create(null),c=0;c<i.length;c++)r=i[c],o=e[r],n=s(o,t),o!==n&&(a[r]=n,delete e[r]);return a}var c=n(41),u=n(49);e.exports=r,e.exports.JSONCookie=o,e.exports.JSONCookies=i,e.exports.signedCookie=s,e.exports.signedCookies=a},function(e,t){"use strict";function n(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var n={},r=t||{},s=e.split(a),c=r.decode||i,u=0;u<s.length;u++){var l=s[u],p=l.indexOf("=");if(!(p<0)){var d=l.substr(0,p).trim(),f=l.substr(++p,l.length).trim();'"'==f[0]&&(f=f.slice(1,-1)),void 0==n[d]&&(n[d]=o(f,c))}}return n}function r(e,t,n){var r=n||{},o=r.encode||s;if("function"!=typeof o)throw new TypeError("option encode is invalid");if(!c.test(e))throw new TypeError("argument name is invalid");var i=o(t);if(i&&!c.test(i))throw new TypeError("argument val is invalid");var a=e+"="+i;if(null!=r.maxAge){var u=r.maxAge-0;if(isNaN(u))throw new Error("maxAge should be a Number");a+="; Max-Age="+Math.floor(u)}if(r.domain){if(!c.test(r.domain))throw new TypeError("option domain is invalid");a+="; Domain="+r.domain}if(r.path){if(!c.test(r.path))throw new TypeError("option path is invalid");a+="; Path="+r.path}if(r.expires){if("function"!=typeof r.expires.toUTCString)throw new TypeError("option expires is invalid");a+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(a+="; HttpOnly"),r.secure&&(a+="; Secure"),r.sameSite){var l="string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite;switch(l){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return a}function o(e,t){try{return t(e)}catch(t){return e}}t.parse=n,t.serialize=r;var i=decodeURIComponent,s=encodeURIComponent,a=/; */,c=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/},function(e,t){e.exports={title:"Auth0 Logs to Mixpanel",name:"auth0-logs-to-mixpanel",version:"1.4.0",author:"auth0",description:"This extension will take all of your Auth0 logs and export them to Mixpanel",type:"cron",repository:"https://github.com/auth0/auth0-logs-to-mixpanel",keywords:["auth0","extension"],schedule:"0 */5 * * * *",auth0:{scopes:"read:logs"},secrets:{MIXPANEL_TOKEN:{description:"Mixpanel Token - this is your Mixpanel Token for your mixpanel project",required:!0},MIXPANEL_KEY:{description:"Mixpanel Key - this is your Mixpanel Key for your mixpanel project",required:!0,type:"password"},BATCH_SIZE:{description:"The amount of logs to be read on each execution. Maximum is 20.",default:10},START_FROM:{description:"CheckpointId of log to start with."},SLACK_INCOMING_WEBHOOK_URL:{description:"Slack webhook"},SLACK_SEND_SUCCESS:{description:"Send success messages to slack?",type:"select",allowMultiple:!0,options:[{value:"No",text:""},{value:"Yes",text:"true"}]},LOG_LEVEL:{description:"This allows you to specify the log level of events that need to be sent",type:"select",allowMultiple:!0,options:[{value:"-",text:""},{value:"0",text:"Debug"},{value:"1",text:"Info"},{value:"2",text:"Warning"},{value:"3",text:"Error"},{value:"4",text:"Critical"}]},LOG_TYPES:{description:"If you only want to send events with a specific type (eg: failed logins)",type:"select",allowMultiple:!0,options:[{value:"-",text:""},{value:"s",text:"Success Login (Info)"},{value:"seacft",text:"Success Exchange (Info)"},{value:"feacft",text:"Failed Exchange (Error)"},{value:"f",text:"Failed Login (Error)"},{value:"w",text:"Warnings During Login (Warning)"},{value:"du",text:"Deleted User (Info)"},{value:"fu",text:"Failed Login (invalid email/username) (Error)"},{value:"fp",text:"Failed Login (wrong password) (Error)"},{value:"fc",text:"Failed by Connector (Error)"},{value:"fco",text:"Failed by CORS (Error)"},{value:"con",text:"Connector Online (Info)"},{value:"coff",text:"Connector Offline (Error)"},{value:"fcpro",text:"Failed Connector Provisioning (Critical)"},{value:"ss",text:"Success Signup (Info)"},{value:"fs",text:"Failed Signup (Error)"},{value:"cs",text:"Code Sent (Debug)"},{value:"cls",text:"Code/Link Sent (Debug)"},{value:"sv",text:"Success Verification Email (Debug)"},{value:"fv",text:"Failed Verification Email (Debug)"},{value:"scp",text:"Success Change Password (Info)"
},{value:"fcp",text:"Failed Change Password (Error)"},{value:"sce",text:"Success Change Email (Info)"},{value:"fce",text:"Failed Change Email (Error)"},{value:"scu",text:"Success Change Username (Info)"},{value:"fcu",text:"Failed Change Username (Error)"},{value:"scpn",text:"Success Change Phone Number (Info)"},{value:"fcpn",text:"Failed Change Phone Number (Error)"},{value:"svr",text:"Success Verification Email Request (Debug)"},{value:"fvr",text:"Failed Verification Email Request (Error)"},{value:"scpr",text:"Success Change Password Request (Debug)"},{value:"fcpr",text:"Failed Change Password Request (Error)"},{value:"fn",text:"Failed Sending Notification (Error)"},{value:"limit_wc",text:"Blocked Account (Critical)"},{value:"limit_ui",text:"Too Many Calls to /userinfo (Critical)"},{value:"api_limit",text:"Rate Limit On API (Critical)"},{value:"sdu",text:"Successful User Deletion (Info)"},{value:"fdu",text:"Failed User Deletion (Error)"}]}}}},function(e,t){function n(e){this.message=e}function r(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new n("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,i,s=0,a=0,c="";i=t.charAt(a++);~i&&(r=s%4?64*r+i:i,s++%4)?c+=String.fromCharCode(255&r>>(-2*s&6)):0)i=o.indexOf(i);return c}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.prototype=new Error,n.prototype.name="InvalidCharacterError",e.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||r},function(e,t,n){function r(e){return decodeURIComponent(o(e).replace(/(.)/g,function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}var o=n(43);e.exports=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return r(t)}catch(e){return o(t)}}},function(e,t,n){var r=n(53),o=n(13),i=n(48).Buffer,s=n(16),a=function(e,t){var n={};if(!e)throw new Error("The Mixpanel Client needs a Mixpanel token: `init(token)`");n.config={test:!1,debug:!1,verbose:!1,host:"api.mixpanel.com"},n.token=e,n.send_request=function(e,t,s){s=s||function(){};var a=new i(JSON.stringify(t)),c={data:a.toString("base64"),ip:0,verbose:n.config.verbose?1:0};if("/import"===e){var u=n.config.key;if(!u)throw new Error("The Mixpanel Client needs a Mixpanel api key when importing old events: `init(token, { key: ... })`");c.api_key=u}var l={host:n.config.host,port:n.config.port,headers:{}};n.config.test&&(c.test=1);var p=o.stringify(c);l.path=[e,"?",p].join(""),r.get(l,function(e){var t="";e.on("data",function(e){t+=e}),e.on("end",function(){var e;if(n.config.verbose)try{var r=JSON.parse(t);1!=r.status&&(e=new Error("Mixpanel Server Error: "+r.error))}catch(t){e=new Error("Could not parse response from Mixpanel")}else e="1"!==t?new Error("Mixpanel Server Error: "+t):void 0;s(e)})}).on("error",function(e){n.config.debug&&console.log("Got Error: "+e.message),s(e)})},n.track=function(e,t,r){"function"!=typeof t&&t||(r=t,t={});var o="number"==typeof t.time?"/import":"/track";t.token=n.token,t.mp_lib="node";var i={event:e,properties:t};n.config.debug&&(console.log("Sending the following event to Mixpanel:"),console.log(i)),n.send_request(o,i,r)};var a=function(e){if(void 0===e)throw new Error("Import methods require you to specify the time of the event");return"[object Date]"===Object.prototype.toString.call(e)&&(e=Math.floor(e.getTime()/1e3)),e};n.import=function(e,t,r,o){"function"!=typeof r&&r||(o=r,r={}),r.time=a(t),n.track(e,r,o)},n.import_batch=function(e,t,r){var o=50,i=e.length,s=i,c=0,u=0,l=[];"function"!=typeof t&&t||(r=t,t={}),t.max_batch_size&&(s=t.max_batch_size,t.max_batch_size<o&&(o=t.max_batch_size));var p=function(){for(var t,s=[],d=u;d<i&&d<u+o;d++)t=e[d].properties,t.time=a(t.time),t.token||(t.token=n.token),s.push(e[d]);s.length>0&&(n.send_request("/import",s,function(e){c+=s.length,e&&l.push(e),c<i?p():r&&r(l)}),u+=o)};n.config.debug&&console.log("Sending "+e.length+" events to Mixpanel in "+Math.ceil(i/o)+" requests");for(var d=0;d<s;d+=o)p()},n.alias=function(e,t,r){var o={distinct_id:e,alias:t};n.track("$create_alias",o,r)},n.people={set_once:function(e,t,n,r,o){var i={};"object"==typeof t?("object"==typeof n?(o=r,r=n):o=n,i=t):(i[t]=n,"function"!=typeof r&&r||(o=r)),r=r||{},r.set_once=!0,this._set(e,i,o,r)},set:function(e,t,n,r,o){var i={};"object"==typeof t?("object"==typeof n?(o=r,r=n):o=n,i=t):(i[t]=n,"function"!=typeof r&&r||(o=r)),this._set(e,i,o,r)},_set:function(e,t,r,o){o=o||{};var i=o&&o.set_once?"$set_once":"$set",s={$token:n.token,$distinct_id:e};s[i]=t,"ip"in t&&(s.$ip=t.ip,delete t.ip),t.$ignore_time&&(s.$ignore_time=t.$ignore_time,delete t.$ignore_time),s=c(s,o),n.config.debug&&(console.log("Sending the following data to Mixpanel (Engage):"),console.log(s)),n.send_request("/engage",s,r)},increment:function(e,t,r,o,i){var s={};"object"==typeof t?("object"==typeof r?(i=o,o=r):i=r,Object.keys(t).forEach(function(e){var r=t[e];return isNaN(parseFloat(r))?void(n.config.debug&&(console.error("Invalid increment value passed to mixpanel.people.increment - must be a number"),console.error("Passed "+e+":"+r))):void(s[e]=r)})):"number"!=typeof r&&r?"function"==typeof r?(i=r,s[t]=1):(i=o,o="object"==typeof r?r:{},s[t]=1):(r=r||1,s[t]=r,"function"==typeof o&&(i=o));var a={$add:s,$token:n.token,$distinct_id:e};a=c(a,o),n.config.debug&&(console.log("Sending the following data to Mixpanel (Engage):"),console.log(a)),n.send_request("/engage",a,i)},append:function(e,t,r,o,i){var s={};"object"==typeof t?("object"==typeof r?(i=o,o=r):i=r,Object.keys(t).forEach(function(e){s[e]=t[e]})):(s[t]=r,"function"==typeof o&&(i=o));var a={$append:s,$token:n.token,$distinct_id:e};a=c(a,o),n.config.debug&&(console.log("Sending the following data to Mixpanel (Engage):"),console.log(a)),n.send_request("/engage",a,i)},track_charge:function(e,t,r,o,i){if("function"!=typeof r&&r?"function"!=typeof o&&o||(i=o||function(){},(r.$ignore_time||r.hasOwnProperty("$ip"))&&(o={},Object.keys(r).forEach(function(e){o[e]=r[e],delete r[e]}))):(i=r||function(){},r={}),"number"!=typeof t&&(t=parseFloat(t),isNaN(t)))return void console.error("Invalid value passed to mixpanel.people.track_charge - must be a number");if(r.$amount=t,r.hasOwnProperty("$time")){var s=r.$time;"[object Date]"===Object.prototype.toString.call(s)&&(r.$time=s.toISOString())}var a={$append:{$transactions:r},$token:n.token,$distinct_id:e};a=c(a,o),n.config.debug&&(console.log("Sending the following data to Mixpanel (Engage):"),console.log(a)),n.send_request("/engage",a,i)},clear_charges:function(e,t,r){var o={$set:{$transactions:[]},$token:n.token,$distinct_id:e};"function"==typeof t&&(r=t),o=c(o,t),n.config.debug&&console.log("Clearing this user's charges:",e),n.send_request("/engage",o,r)},delete_user:function(e,t,r){var o={$delete:"",$token:n.token,$distinct_id:e};"function"==typeof t&&(r=t),o=c(o,t),n.config.debug&&console.log("Deleting the user from engage:",e),n.send_request("/engage",o,r)},union:function(e,t,r,o){var i={};return"object"!=typeof t||s.isArray(t)?void(n.config.debug&&console.error("Invalid value passed to mixpanel.people.union - data must be an object with array values")):(Object.keys(t).forEach(function(e){var r=t[e];if(s.isArray(r)){var o=r.filter(function(e){return"string"==typeof e||"number"==typeof e});o.length>0&&(i[e]=o)}else{if("string"!=typeof r&&"number"!=typeof r)return void(n.config.debug&&(console.error("Invalid argument passed to mixpanel.people.union - values must be a scalar value or array"),console.error("Passed "+e+":",r)));i[e]=[r]}}),void(0!==Object.keys(i).length&&(t={$union:i,$token:n.token,$distinct_id:e},"function"==typeof r&&(o=r),t=c(t,r),n.config.debug&&(console.log("Sending the following data to Mixpanel (Engage):"),console.log(t)),n.send_request("/engage",t,o))))},unset:function(e,t,r,o){var i=[];if(s.isArray(t))i=t;else{if("string"!=typeof t)return void(n.config.debug&&(console.error("Invalid argument passed to mixpanel.people.unset - must be a string or array"),console.error("Passed: "+t)));i=[t]}var a={$unset:i,$token:n.token,$distinct_id:e};"function"==typeof r&&(o=r),a=c(a,r),n.config.debug&&(console.log("Sending the following data to Mixpanel (Engage):"),console.log(a)),n.send_request("/engage",a,o)}};var c=function(e,t){return t&&(t.$ignore_alias&&(e.$ignore_alias=t.$ignore_alias),t.$ignore_time&&(e.$ignore_time=t.$ignore_time),t.hasOwnProperty("$ip")&&(e.$ip=t.$ip),t.hasOwnProperty("$time")&&(e.$time=a(t.$time))),e};return n.set_config=function(e){for(var t in e)if(e.hasOwnProperty(t))if("host"==t){n.config.host=e[t].split(":")[0];var r=e[t].split(":")[1];r&&(n.config.port=Number(r))}else n.config[t]=e[t]},t&&n.set_config(t),n};e.exports={Client:function(e){return console.warn("The function `Client(token)` is deprecated.  It is now called `init(token)`."),a(e)},init:a}},function(e,t,n){function r(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function o(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},n=e.name||"Function wrapped with `once`";return t.onceError=n+" shouldn't be called more than once",t.called=!1,t}var i=n(62);e.exports=i(r),e.exports.strict=i(o),r.proto=r(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return r(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return o(this)},configurable:!0})})},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("buffer")},function(e,t){e.exports=require("cookie-signature")},function(e,t){e.exports=require("crypto")},function(e,t){e.exports=require("ejs")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("jsonwebtoken")},function(e,t){e.exports=require("jwks-rsa@1.1.1")},function(e,t){e.exports=require("lodash@4.8.2")},function(e,t){e.exports=require("lru-memoizer")},function(e,t){e.exports=require("morgan")},function(e,t){e.exports=require("stream")},function(e,t){e.exports=require("webtask-tools")},function(e,t){e.exports=require("winston")},function(e,t){e.exports=require("wrappy")}]);